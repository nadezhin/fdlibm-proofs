(in-package "ACL2")
(include-book "../llvm")
(include-book "e_log")

(defconst *__ieee754_log10-globals* '(
  (zero #x00000000 #x00000000)))

(defund @__ieee754_log10-%75 (mem %1)
  (b* (
    (%76 (load-double %1 mem)))
  %76))

(defund @__ieee754_log10-%43 (mem %hx %i %k %y %z %1 %2)
  (b* (
    (%44 (load-i32 %hx mem))
    (%45 (ashr-i32 %44 20))
    (%46 (sub-i32 %45 1023))
    (%47 (load-i32 %k mem))
    (%48 (add-i32 %47 %46))
    (mem (store-i32 %48 %k mem))
    (%49 (load-i32 %k mem))
    (%50 (and-i32 %49 -2147483648))
    (%51 (lshr-i32 %50 31))
    (mem (store-i32 %51 %i mem))
    (%52 (load-i32 %hx mem))
    (%53 (and-i32 %52 1048575))
    (%54 (load-i32 %i mem))
    (%55 (sub-i32 1023 %54))
    (%56 (shl-i32 %55 20))
    (%57 (or-i32 %53 %56))
    (mem (store-i32 %57 %hx mem))
    (%58 (load-i32 %k mem))
    (%59 (load-i32 %i mem))
    (%60 (add-i32 %58 %59))
    (%61 (sitofp-i32-to-double %60))
    (mem (store-double %61 %y mem))
    (%62 (load-i32 %hx mem))
    (%63 (bitcast-double*-to-i32* %2))
    (%64 (getelementptr-i32 %63 1))
    (mem (store-i32 %62 %64 mem))
    (%65 (load-double %y mem))
    (%66 (fmul-double %65 #x3D59FEF311F12B36))
    (%67 (load-double %2 mem))
    (%68 (@__ieee754_log %67))
    (%69 (fmul-double #x3FDBCB7B1526E50E %68))
    (%70 (fadd-double %66 %69))
    (mem (store-double %70 %z mem))
    (%71 (load-double %z mem))
    (%72 (load-double %y mem))
    (%73 (fmul-double %72 #x3FD34413509F6000))
    (%74 (fadd-double %71 %73))
    (mem (store-double %74 %1 mem)))
  (@__ieee754_log10-%75 mem %1)))

(defund @__ieee754_log10-%39 (mem %1 %2)
  (b* (
    (%40 (load-double %2 mem))
    (%41 (load-double %2 mem))
    (%42 (fadd-double %40 %41))
    (mem (store-double %42 %1 mem)))
  (@__ieee754_log10-%75 mem %1)))

(defund @__ieee754_log10-%36 (mem %hx %i %k %y %z %1 %2)
  (b* (
    (%37 (load-i32 %hx mem))
    (%38 (icmp-sge-i32 %37 2146435072)))
  (case %38
    (-1 (@__ieee754_log10-%39 mem %1 %2))
    (0 (@__ieee754_log10-%43 mem %hx %i %k %y %z %1 %2)))))

(defund @__ieee754_log10-%28 (mem %hx %i %k %y %z %1 %2)
  (b* (
    (%29 (load-i32 %k mem))
    (%30 (sub-i32 %29 54))
    (mem (store-i32 %30 %k mem))
    (%31 (load-double %2 mem))
    (%32 (fmul-double %31 #x4350000000000000))
    (mem (store-double %32 %2 mem))
    (%33 (bitcast-double*-to-i32* %2))
    (%34 (getelementptr-i32 %33 1))
    (%35 (load-i32 %34 mem))
    (mem (store-i32 %35 %hx mem)))
  (@__ieee754_log10-%36 mem %hx %i %k %y %z %1 %2)))

(defund @__ieee754_log10-%22 (mem %1 %2)
  (b* (
    (%23 (load-double %2 mem))
    (%24 (load-double %2 mem))
    (%25 (fsub-double %23 %24))
    (%26 (load-double '(zero . 0) mem))
    (%27 (fdiv-double %25 %26))
    (mem (store-double %27 %1 mem)))
  (@__ieee754_log10-%75 mem %1)))

(defund @__ieee754_log10-%19 (mem %hx %i %k %y %z %1 %2)
  (b* (
    (%20 (load-i32 %hx mem))
    (%21 (icmp-slt-i32 %20 0)))
  (case %21
    (-1 (@__ieee754_log10-%22 mem %1 %2))
    (0 (@__ieee754_log10-%28 mem %hx %i %k %y %z %1 %2)))))

(defund @__ieee754_log10-%16 (mem %1)
  (b* (
    (%17 (load-double '(zero . 0) mem))
    (%18 (fdiv-double #xC350000000000000 %17))
    (mem (store-double %18 %1 mem)))
  (@__ieee754_log10-%75 mem %1)))

(defund @__ieee754_log10-%10 (mem %hx %i %k %lx %y %z %1 %2)
  (b* (
    (%11 (load-i32 %hx mem))
    (%12 (and-i32 %11 2147483647))
    (%13 (load-i32 %lx mem))
    (%14 (or-i32 %12 %13))
    (%15 (icmp-eq-i32 %14 0)))
  (case %15
    (-1 (@__ieee754_log10-%16 mem %1))
    (0 (@__ieee754_log10-%19 mem %hx %i %k %y %z %1 %2)))))

(defund @__ieee754_log10-%0 (mem %x)
  (b* (
    ((mv %1 mem) (alloca-double 'ret 1 mem))
    ((mv %2 mem) (alloca-double 'x 1 mem))
    ((mv %y mem) (alloca-double 'y 1 mem))
    ((mv %z mem) (alloca-double 'z 1 mem))
    ((mv %i mem) (alloca-i32 'i 1 mem))
    ((mv %k mem) (alloca-i32 'k 1 mem))
    ((mv %hx mem) (alloca-i32 'hx 1 mem))
    ((mv %lx mem) (alloca-i32 'lx 1 mem))
    (mem (store-double %x %2 mem))
    (%3 (bitcast-double*-to-i32* %2))
    (%4 (getelementptr-i32 %3 1))
    (%5 (load-i32 %4 mem))
    (mem (store-i32 %5 %hx mem))
    (%6 (bitcast-double*-to-i32* %2))
    (%7 (load-i32 %6 mem))
    (mem (store-i32 %7 %lx mem))
    (mem (store-i32 0 %k mem))
    (%8 (load-i32 %hx mem))
    (%9 (icmp-slt-i32 %8 1048576)))
  (case %9
    (-1 (@__ieee754_log10-%10 mem %hx %i %k %lx %y %z %1 %2))
    (0 (@__ieee754_log10-%36 mem %hx %i %k %y %z %1 %2)))))

(defund @__ieee754_log10 (%x)
  (@__ieee754_log10-%0 *__ieee754_log10-globals* %x))
